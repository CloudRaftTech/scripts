[Unit]
Description=CaddyServer
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=simple
ExecStart=/usr/bin/caddy run -config /etc/caddy/Caddyfile --adapter caddyfile
ExecStop=kill -9 $(pidof caddy)
ExecReload=kill -9 $(pidof caddy) && /usr/bin/caddy run -config /etc/caddy/Caddyfile --adapter caddyfile

[Install]
WantedBy=multi-user.target
